color_enabled() {
        test -x /usr/bin/tput
}

BRANCH_FORMAT=$(color_enabled && tput setaf 2)
DIR_FORMAT=$(color_enabled && tput setaf 6)
RESET_FORMAT=$(color_enabled && tput sgr0)

function git_info() {
        git rev-parse --is-inside-work-tree &>/dev/null || return

        branch=$(git symbolic-ref -q HEAD | sed -e 's|^refs/heads/||')

        dirty=$(git diff --quiet --ignore-submodules HEAD &>/dev/null; [ $? -eq 1 ]&& echo -e "*")

        echo " on "$BRANCH_FORMAT$branch$dirty
}

PS1="\h at \[$DIR_FORMAT\]\w\[$RESET_FORMAT\]\$(git_info) \[$RESET_FORMAT\] \n\$ "

